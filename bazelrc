# ========================
# User .bazelrc for Ubuntu
# ========================
#startup --host_jvm_args=-Xmx8096m
startup --io_nice_level=7

# Restrictions for local resources (CPU, memory)
build --local_cpu_resources=HOST_CPUS*.5
build --local_ram_resources=HOST_RAM*.7
build --ram_utilization_factor=50
#build --jobs=4

# This is so we understand failures better
build --verbose_failures

# Temporary for bazel 0.28.0 https://github.com/bazelbuild/bazel/issues/8571#issuecomment-510366705
info --experimental_google_legacy_api
build --experimental_google_legacy_api

# Disable by default building deployables (jarball and containers) locally since they aren't used and take a long time
build --build_tag_filters=-deployable

# Helps with timeouts when fetching multiple large docker images
fetch --experimental_scale_timeouts=20


test --strategy=TestRunner=standalone

# TEST - unique flags for running all UT
# Active those flags by running adding the flag: "--config=ut-only"
# Note: This is only required if you give bazel wildcard that might include IT
test:ut-only --test_tag_filters=UT,-IT


# TEST - unique flags for running IT
# Active those flags by running adding the flag: "--config=it"
test:it --test_tag_filters=IT
test:it --local_test_jobs=1
